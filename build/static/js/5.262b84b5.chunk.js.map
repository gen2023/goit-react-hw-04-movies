{"version":3,"sources":["services/moviesApi.js","components/MoviesList/MoviesList.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","components/Modal/Modal.js","pages/MoviesPage.js"],"names":["axios","defaults","baseURL","key","getPopularMovie","get","then","response","data","results","getSearchMovie","query","getMovieDetails","movieId","getReviews","getCast","cast","withRouter","movies","url","location","map","id","title","to","pathname","state","from","_arrayLikeToArray","arr","len","length","i","arr2","Array","_toConsumableArray","isArray","iter","Symbol","iterator","Object","o","minLen","n","prototype","toString","call","slice","constructor","name","test","TypeError","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","props","onClose","handleBackdropClick","event","currentTarget","target","window","addEventListener","this","removeEventListener","createPortal","className","onClick","children","Component","MoviesPages","message","showModal","formSubmitHandler","moviesApi","setState","catch","error","handleChange","value","fetchMovies","prevState","finally","isLoading","handleSubmit","preventDefault","closeModal","reset","match","onSubmit","onChange","type","autoComplete","autoFocus","placeholder","MoviesList"],"mappings":"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","file":"static/js/5.262b84b5.chunk.js","sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = `https://api.themoviedb.org/3`;\n\nconst key = '7d9df5dfa812832fa78dacf66d6dbcaa';\n\nexport default {\n  async getPopularMovie() {\n    return await axios\n      .get(`/trending/movie/day?api_key=${key}`)\n      .then(response => response.data.results);\n  },\n\n  async getSearchMovie(query) {\n    return await axios\n      .get(\n        `/search/movie?api_key=${key}&language=en-US&query=${query}&page=1&include_adult=false`,\n      )\n      .then(response => response.data.results);\n  },\n\n  async getMovieDetails(movieId) {\n    return await axios\n      .get(`/movie/${movieId}?api_key=${key}&language=en-US`)\n      .then(response => response.data);\n  },\n\n  async getReviews(movieId) {\n    return await axios\n      .get(`/movie/${movieId}/reviews?api_key=${key}&language=en-US&page=1`)\n      .then(response => response.data.results);\n  },\n  async getCast(movieId) {\n    return await axios\n      .get(`/movie/${movieId}/credits?api_key=${key}`)\n      .then(response => response.data.cast);\n  },\n};\n","import React from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nconst MoviesList = ({ movies, url, location }) => {\n  return (\n    <ul>\n      {movies.map(({ id, title }) => (\n        <li key={id}>\n          <Link\n            to={{\n              pathname: `${url}/${id}`,\n              state: {\n                from: location,\n              },\n            }}\n          >\n            {title}\n          </Link>\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nMoviesList.propTypes = {\n  movies: PropTypes.array.isRequired,\n  url: PropTypes.string.isRequired,\n  location: PropTypes.object.isRequired,\n};\nexport default withRouter(MoviesList);\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport propTypes from 'prop-types';\nimport './modal.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = event => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"ModalBackdrop\" onClick={this.handleBackdropClick}>\n        <div className=\"ModalContent\">\n          <span>{this.props.children}</span>\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\nModal.propTypes = {\n  onClose: propTypes.func.isRequired,\n  children: propTypes.string.isRequired,\n};\n\nexport default Modal;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport MoviesList from '../components/MoviesList';\nimport Modal from '../components/Modal';\n\nimport moviesApi from '../services/moviesApi';\n\nclass MoviesPages extends Component {\n  state = {\n    movies: [],\n    query: '',\n    message: '',\n    showModal: false,\n  };\n  formSubmitHandler = query => {\n    moviesApi\n      .getSearchMovie(query)\n      .then(results => {\n        this.setState({ movies: results });\n      })\n      .catch(error => this.setState({ error }));\n  };\n  handleChange = ({ currentTarget }) => {\n    this.setState({ query: currentTarget.value });\n  };\n\n  fetchMovies = () => {\n    const { query } = this.state;\n\n    moviesApi\n      .getSearchMovie(query)\n      .then(movies =>\n        this.setState(prevState => ({\n          movies: [...prevState.movies, ...movies],\n        })),\n      )\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  };\n\n  handleSubmit = event => {\n    const { query } = this.state;\n\n    event.preventDefault();\n    if (!query) {\n      this.closeModal();\n      return this.setState({ message: 'Please fill in form for search' });\n    }\n    this.fetchMovies();\n    this.setState({ query: '' });\n    this.reset();\n  };\n\n  reset = () => {\n    this.setState({ query: '' });\n  };\n\n  closeModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  render() {\n    const { movies, query, message, showModal } = this.state;\n    const { match } = this.props;\n    return (\n      <>\n        {message !== '' && showModal ? (\n          <Modal onClose={this.closeModal}>{message}</Modal>\n        ) : null}\n        <h2>Find a movie for yourself</h2>\n        <form onSubmit={this.handleSubmit}>\n          <input\n            value={query}\n            onChange={this.handleChange}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search movies\"\n          />\n          <button type=\"submit\">\n            <span>Search</span>\n          </button>\n        </form>\n        <MoviesList movies={movies} url={match.url} />\n      </>\n    );\n  }\n}\n\nMoviesPages.propTypes = {\n  match: PropTypes.shape({\n    url: PropTypes.string.isRequired,\n  }),\n};\n\nexport default MoviesPages;\n"],"sourceRoot":""}